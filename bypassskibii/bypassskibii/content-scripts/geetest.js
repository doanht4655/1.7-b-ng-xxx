var geetest=function(){"use strict";function dt(e){return e}const Ie=!1,le={equals:(e,t)=>e===t};let Ce=me;const N=1,G=2;var j=null;let ee=null,_e=null,v=null,E=null,B=null,V=0;function ue(e,t){t=t?Object.assign({},le,t):le;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},s=i=>(typeof i=="function"&&(i=i(n.value)),ge(n,i));return[Ae.bind(n),s]}function qe(e){if(v===null)return e();const t=v;v=null;try{return e()}finally{v=t}}function Ae(){if(this.sources&&this.state)if(this.state===N)de(this);else{const e=E;E=null,z(()=>H(this)),E=e}if(v){const e=this.observers?this.observers.length:0;v.sources?(v.sources.push(this),v.sourceSlots.push(e)):(v.sources=[this],v.sourceSlots=[e]),this.observers?(this.observers.push(v),this.observerSlots.push(v.sources.length-1)):(this.observers=[v],this.observerSlots=[v.sources.length-1])}return this.value}function ge(e,t,n){let s=e.value;return(!e.comparator||!e.comparator(s,t))&&(e.value=t,e.observers&&e.observers.length&&z(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],c=ee&&ee.running;c&&ee.disposed.has(o),(c?!o.tState:!o.state)&&(o.pure?E.push(o):B.push(o),o.observers&&he(o)),c||(o.state=N)}if(E.length>1e6)throw E=[],new Error})),t}function de(e){if(!e.fn)return;K(e);const t=V;xe(e,e.value,t)}function xe(e,t,n){let s;const i=j,o=v;v=j=e;try{s=e.fn(t)}catch(c){return e.pure&&(e.state=N,e.owned&&e.owned.forEach(K),e.owned=null),e.updatedAt=n+1,pe(c)}finally{v=o,j=i}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?ge(e,s):e.value=s,e.updatedAt=n)}function fe(e){if(e.state===0)return;if(e.state===G)return H(e);if(e.suspense&&qe(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<V);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===N)de(e);else if(e.state===G){const s=E;E=null,z(()=>H(e,t[0])),E=s}}function z(e,t){if(E)return e();let n=!1;E=[],B?n=!0:B=[],V++;try{const s=e();return Te(n),s}catch(s){n||(B=null),E=null,pe(s)}}function Te(e){if(E&&(me(E),E=null),e)return;const t=B;B=null,t.length&&z(()=>Ce(t))}function me(e){for(let t=0;t<e.length;t++)fe(e[t])}function H(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];if(s.sources){const i=s.state;i===N?s!==t&&(!s.updatedAt||s.updatedAt<V)&&fe(s):i===G&&H(s,t)}}}function he(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=G,n.pure?E.push(n):B.push(n),n.observers&&he(n))}}function K(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),s=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),c=n.observerSlots.pop();s<i.length&&(o.sourceSlots[c]=s,i[s]=o,n.observerSlots[s]=c)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)K(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)K(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Me(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function pe(e,t=j){throw Me(e)}const we="1.3.0",Re=(e,t)=>{const n=document.createElement("div");n.style.cssText="position:fixed;top:8%;left:0;background-color:rgba(0,0,0,.6);padding:2px;color:#fff;font:calc(14px + .5vw) 'Arial',sans-serif;font-weight:bold;text-transform:uppercase;letter-spacing:1px;z-index:9999;transition:all 1s;animation:slideIn 1s forwards",n.innerHTML=`<p>${e}. Retrying in..<span id="countdown">${t}</span></p>`,document.body.appendChild(n),(()=>{const o=document.getElementById("countdown");if(!o)return;let c=t;const y=setInterval(()=>{c--,o.textContent=c,c<=0&&clearInterval(y)},1e3)})();const i=document.createElement("style");i.innerHTML="@keyframes slideIn{0%{transform:translateX(-100%)}100%{transform:translateX(0)}}@keyframes slideOut{0%{transform:translateX(0)}100%{transform:translateX(100%)}}",document.head.appendChild(i),setTimeout(()=>{n.style.animation="slideOut 1s forwards",setTimeout(()=>{document.body.removeChild(n)},1e3)},t*1e3)},$=e=>document.querySelector(e),be=e=>document.querySelectorAll(e);function ve(){return $(".task-answers")!==null}function ye(){return be(".task-image .image").length===9}function Ee(){return $(".bounding-box-example")!==null}function Be(){return $(".challenge-header")!==null&&$(".bounding-box-example")===null&&$(".task-grid")==null}function Pe(){const e=document.body.getBoundingClientRect();return e?.width===0||e?.height===0?!1:document.querySelector("div.check")!==null}function D(e){return new Promise(t=>setTimeout(t,e))}function Ue(e,t){return Math.floor(Math.random()*(t-e)+e)}function $e(){try{const e=document.querySelector("div.check");return e&&e.style.display==="block"}catch(e){return console.error(e),!1}}async function De(e){const t=await(await fetch(e,{headers:{accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,/;q=0.8,application/signed-exchange;v=b3;q=0.7","accept-language":"en-US,en;q=0.9","cache-control":"max-age=0","if-modified-since":"Mon, 11 Dec 2023 02:26:04 GMT","if-none-match":'"CFDAD5AA0CE4A3068FF1CABAC59E4D9D"',priority:"u=0, i","sec-ch-ua":'"Chromium";v="130", "Google Chrome";v="130", "Not?A_Brand";v="99"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"',"sec-fetch-dest":"document","sec-fetch-mode":"navigate","sec-fetch-site":"none","sec-fetch-user":"?1","upgrade-insecure-requests":"1"},referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors"})).blob();return await Ne(t)}async function Ne(e){return new Promise(t=>{const n=new FileReader;n.readAsDataURL(e),n.addEventListener("loadend",()=>{const s=n.result.replace(/^data:image\/(png|jpeg);base64,/,"");t(s)}),n.addEventListener("error",()=>{logs&&console.log("❌ Failed to convert url to base64")})})}async function Se(e){const t=await(await fetch(e)).blob();return new Promise(n=>{const s=new FileReader;s.readAsDataURL(t),s.addEventListener("loadend",()=>{n(s.result.replace(/^data:image\/(png|jpeg|webp);base64,/,""))}),s.addEventListener("error",()=>{logs&&console.log("❌ Failed to convert url to base64")})})}function Oe(){document.querySelectorAll("iframe").forEach(t=>{t.src=t.src})}async function Fe(){Ee()?(await D(200),document.querySelector(".display-language.button").click(),await D(100),document.querySelector(".language-selector .option:nth-child(23)").click()):ye()?(await D(100),document.querySelector(".language-selector .option:nth-child(23)").click()):ve()&&(document.querySelector(".display-language.button").click(),await D(200),document.querySelector(".language-selector .option:nth-child(23)").click(),await D(200))}function Le(){document.querySelector(".button-submit").click()}async function Ye(){const e=navigator.userAgent;let t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],`IE ${t[1]||""}`):n[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),t!=null)?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!=null&&n.splice(1,1,t[1]),{version:n,platform:navigator.platform})}function We(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function te(e){["mouseover","mousedown","mouseup","click"].forEach(t=>{if(e.fireEvent)e.fireEvent("on"+t);else{const n=document.createEvent("MouseEvents");n.initEvent(t,!0,!1),e.dispatchEvent(n)}})}function ne(e,t,n,s,i,o,c){e.dispatchEvent(new MouseEvent(t,{bubbles:!0,clientX:n,clientY:s,buttons:i,button:o,pressure:c}))}async function Xe(e,t){const n=document.querySelector("canvas");if(e!==void 0)for(const{from:s,to:i}of e)if(console.log("Coordinates from:",s,"to:",i),Array.isArray(s)&&s.length!==0&&Array.isArray(i)&&i.length!==0){const[o,c]=s,[y,C]=i,p=n.getBoundingClientRect(),w=o+p.left,S=c+p.top,T=y+p.left,k=C+p.top;ne(n,"mousedown",w,S,1,0,1),await new Promise(M=>setTimeout(M,t));const q=T-w,_=k-S,P=Math.sqrt(q**2+_**2),x=Math.round(P/6),O=q/x,ie=_/x;for(let M=1;M<=x;M++){const oe=w+O*M,F=S+ie*M;ne(n,"mousemove",oe,F,1,0,1),await new Promise(ae=>setTimeout(ae,50))}ne(n,"mouseup",T,k,0,0,0)}else h.$(".button-submit").click();else h.$(".button-submit").click()}async function Ge(e){function t(o,c,y){console.log("clickedOn Canvas");const C=o.getBoundingClientRect(),p=["mouseover","mousedown","mouseup","click"],w={clientX:c+C.left,clientY:y+C.top,bubbles:!0};for(let S=0;S<p.length;S++){const T=new MouseEvent(p[S],w);o.dispatchEvent(T)}}const n=document.querySelector("canvas");n.addEventListener("mousedown",o=>{const c=n.getBoundingClientRect();event.clientX-c.left,event.clientY-c.top});const[s,i]=e;t(n,s,i),await h.sleep(2e3)}async function je(e,t){const n=(await chrome.storage.local.get("customEndpoint")).customEndpoint;return t==="custom"?`https://${n}/${e}`:`https://${t}.nocaptchaai.com/${e}`}async function Ve(e){for(const t of e){const n=[...document.querySelectorAll(".answer-text")].find(s=>s.outerText===t);te(n),[...document.querySelectorAll(".answer-example")].some(s=>s.style.backgroundColor==="rgb(116, 116, 116)")||te(n)}}async function ze(){const e=document.querySelector("canvas");if(!e)return null;const[t,n]=[e.width,e.height],i=e.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,t,n);if((k=>{const q=k.data;for(let _=0;_<q.length;_+=4){const P=q[_],x=q[_+1],O=q[_+2];if(P!==x||x!==O)return!1}return!0})(i))return null;const c=parseInt(e.style.width,10),y=parseInt(e.style.height,10);if(c<=0||y<=0)return null;const C=Math.min(c/t,y/n),[p,w]=[t*C,n*C],S=document.createElement("canvas");return Object.assign(S,{width:p,height:w}),S.getContext("2d").drawImage(e,0,0,t,n,0,0,p,w),S.toDataURL("image/jpeg").replace(/^data:image\/(png|jpeg);base64,/,"")}function He(e){return[...document.querySelectorAll(`${e}`)].map(t=>t.style.backgroundImage.replace(/url\("|"\)/g,""))}function Ke(e){return Promise.all(e.map(async(t,n)=>(e[n]=await Se(t),e[n])))}async function Je(e,t,n){const s=e.getBoundingClientRect(),i=s.left+window.scrollX,o=s.top+window.scrollY,c=i+t,y=o+n,C=new MouseEvent("mousedown",{clientX:i,clientY:o,bubbles:!0});e.dispatchEvent(C),await new Promise(k=>setTimeout(k,1e3));const p=5,w=(c-i)/p,S=(y-o)/p;for(let k=1;k<=p;k++){const q=i+w*k,_=o+S*k,P=new MouseEvent("mousemove",{clientX:q,clientY:_,bubbles:!0});e.dispatchEvent(P),await new Promise(x=>setTimeout(x,150))}await h.sleep(1e3);const T=new MouseEvent("mouseup",{clientX:c,clientY:y,bubbles:!0});e.dispatchEvent(T),await new Promise(k=>setTimeout(k,2e3))}async function Qe(e,t,n){try{const i=await(await fetch(e,{method:"POST",headers:n,body:JSON.stringify(t)})).json();if(i.error&&i.error.includes("Daily limit exhausted.")){chrome.runtime.sendMessage({action:"Daily limit exhausted!"}),stop=!0;return}if(i.errorCode==="ERROR_ZERO_BALANCE"){chrome.runtime.sendMessage({action:"Insufficient Balance!"}),stop=!0;return}if(i.error&&i.error.includes("Wallet limit exhausted.")){chrome.runtime.sendMessage({action:"Wallet limit exhausted."}),stop=!0;return}return i}catch(s){throw console.error("Error fetching coordinates:",s),s}}async function Ze(e){return new Promise(t=>{chrome.runtime.sendMessage({type:"GET_IMAGE_BASE64",payload:{url:e}},n=>{n?.success?t(n.data):t(null)})})}const h={version:we,$,$$:be,isMulti:ve,isGrid:ye,isBbox:Ee,isBboxDD:Be,isWidget:Pe,sleep:D,randTimer:Ue,isSolved:$e,countdownNotif:Re,getBase64FromUrl:Se,refreshIframes:Oe,getEn:Fe,skip:Le,getBrowser:Ye,shuffle:We,fireMouseEvents:te,getCanvas:Ge,handleCanvasDD:Xe,getApi:je,clickMatchingElement:Ve,sliceOG:ze,updateExamples:Ke,getExamples:He,solveGeetestCaptcha:Je,sendCoordinatesRequest:Qe,geeFetchImage:De,fetchBase64Image:Ze};async function et(e,t,n){if(!e()||e().enabled===!1||e().options[n].active===!1)return!1;function s(y){return y.replace(/^https?:\/\/(www\.)?/,"")}const i=t(),o=s(i);return!e().blacklist.some(y=>{const C=s(y);return o===C})}const tt={matches:["<all_urls>"],allFrames:!0,match_about_blank:!1,async main(){let e;try{e=window.top.document.location.href}catch{e=window.location.href}const[t]=ue(e),[n,s]=ue(await chrome.storage.local.get("settings"));s(n().settings),await et(n,t,"GeeTest")&&(async()=>{let c=!1;const y={"Content-Type":"application/json",apikey:n().APIKEY};let C=null,p=null,w=null;const S=()=>!navigator.onLine||n().APIKEY===void 0||n().APIKEY===""||n().PLANTYPE===null;for(;!S();){await h.sleep(1e3);let r=h.$$(".geetest_btn_click"),l=r[r.length-1];l&&n().options.GeeTest.autoOpen===!0&&n()?.enabled===!0&&l.click(),await h.sleep(2e3);let u=null,a=null,d=null,b=null,g=null;const m=h.$$(".geetest_wrap");if(m.length>0){const f=m[m.length-1];u=f.querySelector("div.geetest_subitem.geetest_slide"),a=f.querySelector("div.geetest_subitem.geetest_click"),d=f.querySelector("div.geetest_subitem.geetest_match"),b=f.querySelector("div.geetest_subitem.geetest_winlinze"),g=f.querySelector(".geetest_subitem.geetest_nine")}u?p="geetest_slide":a?p="click":d?p="geetest_match":b?p="geetest_winlinze":g&&(p="grid");const A=document.querySelector(".geetest_text_tips");if(A&&(C=A.textContent.trim()),n()?.options?.GeeTest?.autoSolve===!0)try{w=document.querySelector(".geetest_freeze_wait");let f=null;if(w&&(f=await T(p,C,w)),!f)continue;const I=await ct("https://api.nocaptchaai.com/createTask",f,y);if(!I||!I.solution){console.log("No valid solution received from API");continue}switch(p){case"geetest_slide":await x(I);break;case"click":await O(I);break;case"geetest_match":await ie(I);break;case"geetest_winlinze":await M(I);break;case"grid":await oe(I);break;default:console.log("Unknown captcha type:",p)}await at()}catch(f){console.error("Error processing captcha:",f),await U()}}async function T(r,l,u){const a={clientKey:n().APIKEY,source:"chrome",version:we,task:{type:"GeetestClassification",websiteURL:t()}};try{switch(r){case"geetest_slide":const d=await k(u);return!d.bgImage||!d.sliceImage?null:{...a,task:{...a.task,images:[d.bgImage],slice:[d.sliceImage],question:"slide"}};case"grid":async function b(){const R=u.querySelector("div.geetest_imgs0.geetest_item_img");let I=[],L=R?.getAttribute("style");const Y=L?L.match(/url\("([^"]+)"\)/):null;if(Y){const ce=await h.fetchBase64Image(Y[1]);let gt=await lt(ce);I.push(...gt)}let W=await ut(),X=await h.fetchBase64Image(W);return[I,X]}const g=await b();return!g||g.length===0?null:{...a,task:{...a.task,images:g[0],slice:[g[1]],question:`${r}:${l}`}};case"click":const m=await q(u);return!m.bgImage||m.sliceImages.length===0?null:{...a,task:{...a.task,images:[m.bgImage],slice:m.sliceImages,question:`${r}:${l}`}};case"geetest_match":const A=await _();return{...a,task:{...a.task,numbers:A}};case"geetest_winlinze":const f=await P();return{...a,task:{...a.task,numbers:f}};default:return null}}catch(d){return console.error("Error generating payload:",d),null}}async function k(r){const l=r.querySelector("div.geetest_bg"),u=F(l?.style.backgroundImage),a=r.querySelector("div.geetest_slice_bg"),d=F(a?.style.backgroundImage);if(!u||!d)throw new Error("Missing slide captcha images");const b=await h.fetchBase64Image(u),g=await h.fetchBase64Image(d);return{bgImage:b,sliceImage:g}}async function q(r){const l=r.querySelector("div.geetest_bg"),u=F(l?.style.backgroundImage),a=r.querySelector(".geetest_ques_tips.geetest_ques_back"),d=a?Array.from(a.querySelectorAll("img")).slice(-3):[];if(!u||d.length===0)throw new Error("Missing click captcha images");const b=await h.fetchBase64Image(u),g=await Promise.all(d.map(m=>h.fetchBase64Image(m.src)));return{bgImage:b,sliceImages:g}}async function _(){const r=document.querySelectorAll('div[class*="geetest_item_"]');return Array.from(r).map(l=>{const u=Array.from(l.classList).find(a=>a.startsWith("geetest_item_"));return parseInt(u.split("_").pop())})}async function P(){const r=document.querySelectorAll(".geetest_itemimg");return Array.from(r).map(l=>{const a=l.style.backgroundImage?.match(/img_winlinze_(\d+)\.png/);return a?parseInt(a[1],10):0})}async function x(r){const l=w.querySelector("div.geetest_slice_bg");l&&r.solution.slide?.length===2?await h.solveGeetestCaptcha(l,r.solution.slide[0],r.solution.slide[1]):await U()}async function O(r){r.solution.objects?.length>0?(await ae(r.solution.objects,300),await ot()):await U()}async function ie(r){r.solution.valid_swaps?.length===2?(await clickElementWithClass(r.solution.valid_swaps[0]),await h.sleep(2e3),await clickElementWithClass(r.solution.valid_swaps[1])):await U()}async function M(r){r.solution.valid_swaps?.length===2?(await clickElementWithClass(r.solution.valid_swaps[0]),await h.sleep(2e3),await clickElementWithClass(r.solution.valid_swaps[1])):await U()}async function oe(r){w=document.querySelector(".geetest_freeze_wait"),r.solution.objects?.length>0?await it(r.solution.objects):await U()}function F(r){const l=r?.match(/"([^"]*)"/);return l?l[1]:null}async function ae(r,l){const u=h.$$(".geetest_bg"),a=u[u.length-1];if(!a)return;const d=a.getBoundingClientRect();for(const b of r)if(b.length>0)for(const g of b){const m=d.left+g.x,A=d.top+g.y;await h.sleep(300);const f=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0,clientX:m,clientY:A});a.dispatchEvent(f),await h.sleep(l)}else await U()}async function it(r){const l=Array.from(w.querySelectorAll(".geetest_item"));for(let u=0;u<r.length;u++){const a=l[r[u]]?.querySelector(`.geetest_ghost_${r[u]}`);a&&(a.click(),await h.sleep(300))}}async function ot(){const r=w?.querySelector(".geetest_submit_tips");r&&r.click()}async function at(){await h.sleep(2e3),h.$(".geetest_result_tips")?.textContent.trim().length>0&&(c=!0)}async function U(){const r=w?.querySelector(".geetest_refresh");r&&r.click()}async function ct(r,l,u){return new Promise((a,d)=>{try{const b={type:"networkRequest",payload:{url:r,method:"POST",headers:u,body:JSON.stringify(l)}};chrome.runtime.sendMessage(b,async g=>{if(!g.success)return console.error("Error for Request:",g.error),d(g.error);const m=g.data;if(m.errorId===1)return console.error("Error for Request:",g.error),d(g.error);const A={"Invalid apikey":"Invalid apikey","Daily limit exhausted.":"Daily limit exhausted!",ERROR_ZERO_BALANCE:"Insufficient Balance!","Wallet limit exhausted.":"Wallet limit exhausted."};if(m.error||m.message){const f=A[m.error]||A[m.message];if(f)return chrome.runtime.sendMessage({action:f}),c=!0,d(f)}a(m)})}catch(b){return console.error("Error fetching coordinates:",b),d(b)}})}async function lt(r,l=3,u=3){return new Promise((a,d)=>{const b="data:image/jpeg;base64,";r.startsWith("data:image")||(r=b+r);const g=new Image;g.src=r,g.onload=()=>{try{const m=g.width,A=g.height,f=m/u,R=A/l,I=document.createElement("canvas"),L=I.getContext("2d"),Y=[];for(let W=0;W<l;W++)for(let X=0;X<u;X++){I.width=f,I.height=R,L.clearRect(0,0,f,R),L.drawImage(g,X*f,W*R,f,R,0,0,f,R);const ce=I.toDataURL("image/jpeg").replace(b,"");Y.push(ce)}a(Y)}catch(m){d("Error slicing image: "+m.message)}},g.onerror=m=>d("Error loading image: "+m.message)})}async function ut(){const r=w.querySelector("div.geetest_ques_tips.geetest_ques_back");if(r){const l=r.querySelector("img");return l?l.src:null}return null}})()}},ke=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function J(e,...t){}const nt={debug:(...e)=>J(console.debug,...e),log:(...e)=>J(console.log,...e),warn:(...e)=>J(console.warn,...e),error:(...e)=>J(console.error,...e)};class se extends Event{constructor(t,n){super(se.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=n}static EVENT_NAME=re("wxt:locationchange")}function re(e){return`${ke?.runtime?.id}:geetest:${e}`}function st(e){let t,n;return{run(){t==null&&(n=new URL(location.href),t=e.setInterval(()=>{let s=new URL(location.href);s.href!==n.href&&(window.dispatchEvent(new se(s,n)),n=s)},1e3))}}}class Q{constructor(t,n){this.contentScriptName=t,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=re("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=st(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return ke.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,n){const s=setInterval(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,n){const s=setTimeout(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const n=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(t,n){const s=requestIdleCallback((...i)=>{this.signal.aborted||t(...i)},n);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,n,s,i){n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),t.addEventListener?.(n.startsWith("wxt:")?re(n):n,s,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),nt.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:Q.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){const n=t.data?.type===Q.SCRIPT_STARTED_MESSAGE_TYPE,s=t.data?.contentScriptName===this.contentScriptName,i=!this.receivedMessageIds.has(t.data?.messageId);return n&&s&&i}listenForNewerScripts(t){let n=!0;const s=i=>{if(this.verifyScriptStartedEvent(i)){this.receivedMessageIds.add(i.data.messageId);const o=n;if(n=!1,o&&t?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}}function ht(){}function Z(e,...t){}const rt={debug:(...e)=>Z(console.debug,...e),log:(...e)=>Z(console.log,...e),warn:(...e)=>Z(console.warn,...e),error:(...e)=>Z(console.error,...e)};return(async()=>{try{const{main:e,...t}=tt,n=new Q("geetest",t);return await e(n)}catch(e){throw rt.error('The content script "geetest" crashed on startup!',e),e}})()}();
geetest;
