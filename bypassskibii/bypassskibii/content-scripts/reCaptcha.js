var recaptcha=function(){"use strict";function Oe(e){return e}const me=!1,Z={equals:(e,r)=>e===r};let de=se;const k=1,M=2;var D=null;let Y=null,pe=null,g=null,y=null,A=null,R=0;function X(e,r){r=r?Object.assign({},Z,r):Z;const t={value:e,observers:null,observerSlots:null,comparator:r.equals||void 0},n=u=>(typeof u=="function"&&(u=u(t.value)),ee(t,u));return[ye.bind(t),n]}function ge(e){if(g===null)return e();const r=g;g=null;try{return e()}finally{g=r}}function ye(){if(this.sources&&this.state)if(this.state===k)te(this);else{const e=y;y=null,F(()=>P(this)),y=e}if(g){const e=this.observers?this.observers.length:0;g.sources?(g.sources.push(this),g.sourceSlots.push(e)):(g.sources=[this],g.sourceSlots=[e]),this.observers?(this.observers.push(g),this.observerSlots.push(g.sources.length-1)):(this.observers=[g],this.observerSlots=[g.sources.length-1])}return this.value}function ee(e,r,t){let n=e.value;return(!e.comparator||!e.comparator(n,r))&&(e.value=r,e.observers&&e.observers.length&&F(()=>{for(let u=0;u<e.observers.length;u+=1){const p=e.observers[u],d=Y&&Y.running;d&&Y.disposed.has(p),(d?!p.tState:!p.state)&&(p.pure?y.push(p):A.push(p),p.observers&&ie(p)),d||(p.state=k)}if(y.length>1e6)throw y=[],new Error})),r}function te(e){if(!e.fn)return;O(e);const r=R;be(e,e.value,r)}function be(e,r,t){let n;const u=D,p=g;g=D=e;try{n=e.fn(r)}catch(d){return e.pure&&(e.state=k,e.owned&&e.owned.forEach(O),e.owned=null),e.updatedAt=t+1,ne(d)}finally{g=p,D=u}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?ee(e,n):e.value=n,e.updatedAt=t)}function re(e){if(e.state===0)return;if(e.state===M)return P(e);if(e.suspense&&ge(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<R);)e.state&&r.push(e);for(let t=r.length-1;t>=0;t--)if(e=r[t],e.state===k)te(e);else if(e.state===M){const n=y;y=null,F(()=>P(e,r[0])),y=n}}function F(e,r){if(y)return e();let t=!1;y=[],A?t=!0:A=[],R++;try{const n=e();return we(t),n}catch(n){t||(A=null),y=null,ne(n)}}function we(e){if(y&&(se(y),y=null),e)return;const r=A;A=null,r.length&&F(()=>de(r))}function se(e){for(let r=0;r<e.length;r++)re(e[r])}function P(e,r){e.state=0;for(let t=0;t<e.sources.length;t+=1){const n=e.sources[t];if(n.sources){const u=n.state;u===k?n!==r&&(!n.updatedAt||n.updatedAt<R)&&re(n):u===M&&P(n,r)}}}function ie(e){for(let r=0;r<e.observers.length;r+=1){const t=e.observers[r];t.state||(t.state=M,t.pure?y.push(t):A.push(t),t.observers&&ie(t))}}function O(e){let r;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),u=t.observers;if(u&&u.length){const p=u.pop(),d=t.observerSlots.pop();n<u.length&&(p.sourceSlots[d]=n,u[n]=p,t.observerSlots[n]=d)}}if(e.tOwned){for(r=e.tOwned.length-1;r>=0;r--)O(e.tOwned[r]);delete e.tOwned}if(e.owned){for(r=e.owned.length-1;r>=0;r--)O(e.owned[r]);e.owned=null}if(e.cleanups){for(r=e.cleanups.length-1;r>=0;r--)e.cleanups[r]();e.cleanups=null}e.state=0}function ve(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ne(e,r=D){throw ve(e)}async function Se(e,r,t){if(!e()||e().enabled===!1||e().options[t].active===!1)return!1;function n(I){return I.replace(/^https?:\/\/(www\.)?/,"")}const u=r(),p=n(u);return!e().blacklist.some(I=>{const _=n(I);return p===_})}const Ee="1.3.0",Ae={matches:["<all_urls>"],allFrames:!0,async main(){let e;try{e=window.top.document.location.href}catch{e=window.location.href}const[r]=X(e),[t,n]=X(await chrome.storage.local.get("settings"));if(n(t().settings),chrome.runtime.onMessage.addListener((i,s,a)=>{if(i.action==="ReCaptcha_refresh_iframes"){const c=[...document.querySelectorAll("[src*=recaptcha]")];if(c)for(const o of c){const l=o.src;o.src="about:blank",setTimeout(()=>{o.src=l},100)}for(let o=0;o<c.length;o++){const l=c[o];try{l.contentWindow.location.origin!==window.location.origin&&(l.src=l.src)}catch{l.src=l.src}}}}),!await Se(t,r,"ReCaptcha"))return;let d=!1,I=t().logsEnabled==="true";async function _(i,s){const a=document.querySelectorAll(".rc-image-tile-wrapper"),c={};async function o(l,m){const S=await Promise.all(Array.from(a).map(async h=>{const f=h.querySelector("img");return f?z(f.src):null})),v=S.every(h=>h!==null);return!v&&l>0?(await new Promise(h=>setTimeout(h,m)),o(l-1,m)):v?(S.forEach((h,f)=>{c[f]=h}),c):(console.error("Failed to fetch all images after retries"),null)}switch(i){case"split_33":return o(10,1e3);case"33":case"44":return await z(s);default:return console.log("Invalid grid type:",i),{}}}class J{static now(){return Date.now()}static currentDate(){return new Date}static sleep(s){return new Promise(a=>setTimeout(a,s))}static async randomSleep(s,a){const c=Math.floor(Math.random()*(a-s)+s);return await J.sleep(c)}}async function z(i){try{const s=await fetch(i);if(!s.ok)throw new Error(`Failed to fetch URL: ${s.status} ${s.statusText}`);const a=await s.blob();return new Promise((c,o)=>{const l=new FileReader;l.onloadend=()=>c(l.result.replace(/^data:image\/(png|jpeg);base64,/,"")),l.onerror=o,l.readAsDataURL(a)})}catch(s){throw console.error("Error in getBase64FromUrl:",s),s}}async function T(i){if(!(i instanceof HTMLElement))return;const s=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0});Object.defineProperty(s,"movementX",{value:Math.floor(Math.random()*7)-3,enumerable:!0}),Object.defineProperty(s,"movementY",{value:Math.floor(Math.random()*7)-3,enumerable:!0}),[new MouseEvent("mouseover",{bubbles:!0,cancelable:!0}),new MouseEvent("mousemove",{bubbles:!0,cancelable:!0}),new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}),new MouseEvent("mouseup",{bubbles:!0,cancelable:!0}),new MouseEvent("click",{bubbles:!0,cancelable:!0})].forEach((c,o)=>{i.dispatchEvent(c)})}async function Te(){document.getElementById("recaptcha-anchor").getAttribute("aria-disabled")!=="false"&&await T(document.querySelector("#recaptcha-anchor"))}async function B(){let i=document.querySelector("#recaptcha-anchor");return i?(i.getAttribute("aria-checked"),i.getAttribute("aria-checked")==="true"):!1}async function ce(){let i=document.querySelector("#recaptcha-reload-button"),s=i?i.disabled:!0;return!!document.querySelector("#rc-imageselect")&&!s}async function Ce(){return!!document.querySelector(".recaptcha-checkbox")}async function j(){return document.querySelectorAll(".rc-imageselect-tile").length===9}async function H(){return document.querySelectorAll(".rc-imageselect-tile").length===16}async function xe(){return document.querySelector("#recaptcha-anchor")?.classList.contains("recaptcha-checkbox-expired")}async function Me(){try{const i=document.querySelectorAll("iframe");for(const s of i){const a=s.src;s.src="about:blank",await new Promise(c=>{s.onload=()=>{s.onload=null,s.src=a,c()}})}}catch{try{const s=document.querySelectorAll("iframe");for(const a of s){const c=a.src;a.src="about:blank",await new Promise(o=>setTimeout(o,50)),a.src=c}}catch{const a=document.querySelectorAll("iframe");for(const c of a)c.src=c.src}}}class b{static query(s,a){const c=document.querySelector(s);return a?c?.getAttribute(a):c}static queryAll(s){return document.querySelectorAll(s)}static isWidgetFrame(){return!!this.query(".recaptcha-checkbox")}static isImageFrame(){return!!this.query("#rc-imageselect")}static isErrorSelect(){return this.query(".rc-imageselect-error-select-more","style")!=="none"}static isErrorDynamic(){return this.query(".rc-imageselect-error-dynamic-more","style")!=="none"}static isSubmitDisabled(){return this.query("#recaptcha-verify-button","disabled")===!0}static isExpired(){return!!this.query(".recaptcha-checkbox-border")}static is11(){return this.queryAll(".rc-image-tile-11").length!==0}static isDynamic33(){return this.queryAll(".rc-imageselect-dynamic-selected").length!==0}static is33(){return this.queryAll(".rc-imageselect-tile").length===9}static is44(){return this.queryAll(".rc-imageselect-tile").length===16}static src11(){return this.query(".rc-image-tile-11","src")}static src44(){return this.query(".rc-image-tile-44","src")}static src33(){return this.query(".rc-image-tile-33","src")}static submit(){this.query("#recaptcha-verify-button")?.click()}static clicAudioBtn(){this.query("#recaptcha-audio-button")?.click()}static reload(){this.query("#recaptcha-reload-button")?.click()}static isSolved(){return this.query(".recaptcha-checkbox","aria-checked")==="true"||this.isSubmitDisabled()}static recapExpired(){return document.querySelector("#recaptcha-anchor")?.classList.contains("recaptcha-checkbox-expired")}static recapSolved(){let s=document.querySelector("#recaptcha-anchor");return s?(s.getAttribute("aria-checked"),s.getAttribute("aria-checked")==="true"):!1}static hasErrors(){return[".rc-imageselect-error-select-more",".rc-imageselect-error-dynamic-more",".rc-imageselect-error-select-something"].some(s=>{const a=this.query(s);return a&&getComputedStyle(a).display!=="none"&&a.tabIndex===0})}static isRateLimited(){return!!this.query(".rc-doscaptcha-header")}static isCellSelected(s){return s?.classList.contains("rc-imageselect-tileselected")}static getTarget(){return this.query(".rc-imageselect-desc strong, .rc-imageselect-desc-no-canonical strong","innerText")}static async refreshIframes(){try{const s=document.querySelectorAll("iframe");for(const a of s){const c=a.src;a.src="about:blank",await new Promise(o=>{a.onload=()=>{a.onload=null,a.src=c,o()}})}}catch{try{const a=document.querySelectorAll("iframe");for(const c of a){const o=c.src;c.src="about:blank",await new Promise(l=>setTimeout(l,50)),c.src=o}}catch{const c=document.querySelectorAll("iframe");for(const o of c)o.src=o.src}}}}let Q=null;async function De(){const i=await H()?"44":await j()?"33":await is11()?"split_33":null;if(!i)return;const[s,a,c]=await Re(),o=i==="split_33"?await _(c,a):{0:await _(c,a)},l=JSON.stringify(o);if(l){if(l===Q)return Q=l,"skip";Q=l,Pe(o,c,s,i)}}async function Re(){const i=await H()?"44":await j()?"33":null;if(!i)return;const s=document.querySelector(".rc-imageselect-instructions strong")?.innerText;if(!s)return;const a=document.querySelector(`.rc-image-tile-${i}`)?.src;if(a)return[s,a,i]}function Fe(i,s=1e4){return new Promise((a,c)=>{const o=document.querySelector(i);if(o)return a(o);const l=new MutationObserver(()=>{const m=document.querySelector(i);m&&(l.disconnect(),a(m))});l.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{l.disconnect()},s)})}(async()=>{try{const i=await Fe(".recaptcha-checkbox");new MutationObserver(()=>{i.classList.contains("recaptcha-checkbox-focused")&&setTimeout(()=>{i.click()},1e3)}).observe(i,{attributes:!0,attributeFilter:["class"]})}catch(i){console.error(i)}})();const $=new Map;for(;d===!1&&t().PLANTYPE&&t().APIKEY&&t().enabled===!0&&t().options.ReCaptcha.active===!0&&t().options.ReCaptcha.solveType!=="audio";)if(await J.sleep(2e3),await Ce()&&t().options.ReCaptcha.autoOpen===!0&&!t().blacklist.includes(r()))if(await B()){d=!0;return}else await Te();else if(await ce()&&t().options.ReCaptcha.autoSolve===!0&&t().options.ReCaptcha.alwaysSolve===!0){const i=await H()?"44":await j()?"33":null;(i==="33"||i==="44")&&await ce()&&!await B()&&(await De(),await B()==!0&&(d=!0))}else if(await xe())await Me(),d=!1;else if(await B()){d=!0;return}async function C(){await T(document.querySelector("#recaptcha-verify-button"))}async function oe(i,s,a){const c="https://api.nocaptchaai.com/createTask",o={"Content-Type":"application/json",APIKEY:t().APIKEY};if(t().logsEnabled&&!i)return;const l=Object.values(i),m=JSON.stringify({target:s,type:a,img:l}),S=10;if($.has(m))return $.get(m);async function v(f,q=0){return new Promise((x,W)=>{const V={type:"networkRequest",payload:{url:c,method:"POST",headers:o,body:JSON.stringify({clientKey:t().APIKEY,source:"chrome",version:Ee,task:{type:"ReCaptchaV2Classification",questionType:a,image:f,question:s,websiteURL:r(),metadata:{pageURL:r(),title:"reCAPTCHA"}}})}};chrome.runtime.sendMessage(V,E=>{if(!E)return W(new Error("No response received from chrome.runtime.sendMessage."));if(E.success){if(E?.data?.solution?.objects?.length===0)return b.reload();x(E.data)}else W(new Error(E.error||"Request failed"))})}).catch(async x=>{if(q>=S)throw new Error("Max retries reached. Request failed.");return await w(2e3),v(f,q+1)})}const h=v(l).then(f=>{function q(x,W){const V={"Invalid apikey":"Invalid apikey","Daily limit exhausted.":"Daily limit exhausted",ERROR_ZERO_BALANCE:"Insufficient Balance!","Wallet limit exhausted.":"Wallet limit exhausted"};let E=W||"An unknown error occurred.";for(const he in V)x.includes(he)&&(E=V[he]);return x?(chrome.runtime.sendMessage({action:E}),d=!0,!0):!1}if(!(f.error&&q(f.error,f.message))){if(f.errorId!==0){chrome.runtime.sendMessage({action:f.message||"An unexpected error occurred."}),d=!0;return}if(f.error&&f.error.includes("Daily limit exhausted.")){chrome.runtime.sendMessage({action:"Daily limit exhausted!"}),d=!0;return}if(f.errorCode==="ERROR_ZERO_BALANCE"){chrome.runtime.sendMessage({action:"Insufficient Balance!"}),d=!0;return}if(f.error&&f.error.includes("Wallet limit exhausted.")){chrome.runtime.sendMessage({action:"Wallet limit exhausted."}),d=!0;return}if(f.errorId===1){chrome.runtime.sendMessage({action:"Invalid apikey"+f.message}),d=!0;return}return f}}).finally(()=>{$.delete(m)});return $.set(m,h),h}async function Pe(i,s,a,c,o){const l=document.querySelector(".rc-imageselect-desc-no-canonical strong")?.textContent;if(!i)return;const m=await oe(i,a||l,s),S=document.querySelectorAll(".rc-image-tile-wrapper");if(!S)return;const v=await ue(m);if(v){for(const h of v)await T(S[h]),await w(t().options.ReCaptcha.clickDelay);if(b.isDynamic33()===!1&&(await w(t().options.ReCaptcha.submitDelay*1e3),C(),b.isErrorSelect()||b.isErrorDynamic()))return fe("error found, skipping"),b.reload();if(c)return le(a,v);await w(t().options.ReCaptcha.submitDelay*1e3),C()}}async function le(i,s){for(;!d&&document.querySelectorAll(".rc-image-tile-11").length<s.length;)await w(150);const a=document.querySelectorAll(".rc-image-tile-wrapper img"),c=Array.from(a).map((h,f)=>h.classList.contains("rc-image-tile-11")?{index:f,src:h.src}:null).filter(h=>h!==null),o={};if(await Promise.all(c.map(async({index:h,src:f})=>{o[h]=await z(f)})),!s)return;const l=await oe(o,i,"split_33");if(!l)return;const m=await ue(l);if(!m)return;const S=m.every(h=>typeof h=="number");if(m.every(h=>typeof h=="boolean")&&!m.some(f=>f===!0))return await w(t().options.ReCaptcha.submitDelay*1e3),C(),b.isErrorSelect()||b.isErrorDynamic()?b.reload():void 0;if(S&&m.length==0)return await w(t().options.ReCaptcha.submitDelay*1e3),C(),b.isErrorSelect()||b.isErrorDynamic()?b.reload():void 0;if(m.length==0)return await w(t().options.ReCaptcha.submitDelay*1e3),C(),b.isErrorSelect()||b.isErrorDynamic()?b.reload():void 0;for(const h of m)if(Number.isInteger(h)&&(await T(a[h]),await w(t().options.ReCaptcha.clickDelay)),typeof h=="boolean"){const f=m.indexOf(!0),q=Object.keys(o)[f];await T(a[q]),await w(t().options.ReCaptcha.clickDelay)}await w(1e3),le(i,m)}async function ue(i){if(!i)return i;if(i?.solution){if(Array.isArray(i.solution.objects)&&i.solution.objects.every(s=>typeof s=="number"))return i.solution.objects;if(Array.isArray(i.solution.hasObject)&&i.solution.hasObject.every(s=>typeof s=="boolean"))return i.solution.hasObject}}function w(i){return new Promise(s=>setTimeout(s,i))}function fe(){t().logs&&console.log.apply(this,arguments)}}},ae=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function N(e,...r){}const qe={debug:(...e)=>N(console.debug,...e),log:(...e)=>N(console.log,...e),warn:(...e)=>N(console.warn,...e),error:(...e)=>N(console.error,...e)};class K extends Event{constructor(r,t){super(K.EVENT_NAME,{}),this.newUrl=r,this.oldUrl=t}static EVENT_NAME=G("wxt:locationchange")}function G(e){return`${ae?.runtime?.id}:reCaptcha:${e}`}function ke(e){let r,t;return{run(){r==null&&(t=new URL(location.href),r=e.setInterval(()=>{let n=new URL(location.href);n.href!==t.href&&(window.dispatchEvent(new K(n,t)),t=n)},1e3))}}}class L{constructor(r,t){this.contentScriptName=r,this.options=t,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=G("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=ke(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(r){return this.abortController.abort(r)}get isInvalid(){return ae.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(r){return this.signal.addEventListener("abort",r),()=>this.signal.removeEventListener("abort",r)}block(){return new Promise(()=>{})}setInterval(r,t){const n=setInterval(()=>{this.isValid&&r()},t);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(r,t){const n=setTimeout(()=>{this.isValid&&r()},t);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(r){const t=requestAnimationFrame((...n)=>{this.isValid&&r(...n)});return this.onInvalidated(()=>cancelAnimationFrame(t)),t}requestIdleCallback(r,t){const n=requestIdleCallback((...u)=>{this.signal.aborted||r(...u)},t);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(r,t,n,u){t==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),r.addEventListener?.(t.startsWith("wxt:")?G(t):t,n,{...u,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),qe.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:L.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(r){const t=r.data?.type===L.SCRIPT_STARTED_MESSAGE_TYPE,n=r.data?.contentScriptName===this.contentScriptName,u=!this.receivedMessageIds.has(r.data?.messageId);return t&&n&&u}listenForNewerScripts(r){let t=!0;const n=u=>{if(this.verifyScriptStartedEvent(u)){this.receivedMessageIds.add(u.data.messageId);const p=t;if(t=!1,p&&r?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",n),this.onInvalidated(()=>removeEventListener("message",n))}}function Ue(){}function U(e,...r){}const Ie={debug:(...e)=>U(console.debug,...e),log:(...e)=>U(console.log,...e),warn:(...e)=>U(console.warn,...e),error:(...e)=>U(console.error,...e)};return(async()=>{try{const{main:e,...r}=Ae,t=new L("reCaptcha",r);return await e(t)}catch(e){throw Ie.error('The content script "reCaptcha" crashed on startup!',e),e}})()}();
recaptcha;
